<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS AI - VOLCA EDITION</title>
    
    <!-- FIREBASE -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    
    <!-- FONT AWESOME -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- MONACO EDITOR (UNTUK CODE CANVAS) -->
    <script src="https://unpkg.com/monaco-editor@0.36.0/min/vs/loader.js"></script>

    <style>
        /* ===== RESET & VARIABLES ===== */
        :root {
            /* Quantum Colors - NEON RED/BLUE */
            --primary-neon: #ff0080;
            --secondary-neon: #00ffea;
            --accent-neon: #8b5cf6;
            --bg-dark: #0a0a1a;
            --bg-darker: #050510;
            --card-bg: rgba(20, 20, 40, 0.95);
            --text-primary: #ffffff;
            --text-secondary: #b0b0ff;
            
            /* Chat Bubbles */
            --user-bubble: linear-gradient(135deg, #ff0080, #8b5cf6);
            --ai-bubble: linear-gradient(135deg, #1a1a3a, #2a2a5a);
            --error-bubble: linear-gradient(135deg, #ff4757, #ff3838);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-darker);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
        }

        /* ===== LOADING SCREEN ===== */
        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #050510 0%, #0a0a1a 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .atom-loader {
            width: 200px;
            height: 200px;
            position: relative;
            margin-bottom: 30px;
        }

        .nucleus {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: var(--primary-neon);
            border-radius: 50%;
            box-shadow: 0 0 40px var(--primary-neon);
            animation: pulse 2s infinite;
        }

        .orbit {
            position: absolute;
            top: 50%;
            left: 50%;
            border: 2px solid var(--accent-neon);
            border-radius: 50%;
        }

        .orbit:nth-child(2) {
            width: 120px;
            height: 120px;
            animation: spin 10s linear infinite;
        }

        .orbit:nth-child(3) {
            width: 180px;
            height: 180px;
            animation: spin 15s linear infinite reverse;
        }

        .electron {
            position: absolute;
            top: -10px;
            left: 50%;
            width: 20px;
            height: 20px;
            background: var(--secondary-neon);
            border-radius: 50%;
            box-shadow: 0 0 20px var(--secondary-neon);
        }

        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.3); }
        }

        @keyframes spin {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .loading-text {
            font-size: 28px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-neon), var(--secondary-neon));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
        }

        .loading-subtext {
            color: var(--text-secondary);
            margin-bottom: 30px;
        }

        /* ===== MAIN LAYOUT ===== */
        .app-container {
            display: flex;
            height: 100vh;
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            width: 80px;
            background: var(--bg-dark);
            border-right: 1px solid rgba(139, 92, 246, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
            transition: width 0.3s ease;
            overflow: hidden;
        }

        .sidebar.expanded {
            width: 300px;
            align-items: flex-start;
            padding: 20px;
        }

        .menu-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
            margin-bottom: 30px;
        }

        .logo-container {
            text-align: center;
            margin-bottom: 40px;
            display: none;
        }

        .sidebar.expanded .logo-container {
            display: block;
            width: 100%;
        }

        .logo {
            font-size: 32px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-neon), var(--secondary-neon));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }

        .logo-sub {
            font-size: 12px;
            color: var(--text-secondary);
            letter-spacing: 3px;
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 12px;
            width: 100%;
            display: none;
        }

        .sidebar.expanded .user-section {
            display: flex;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-neon), var(--accent-neon));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .user-info h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .user-info p {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .nav-menu {
            width: 100%;
            flex: 1;
            display: none;
            flex-direction: column;
            gap: 10px;
        }

        .sidebar.expanded .nav-menu {
            display: flex;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        .nav-item.active {
            background: linear-gradient(135deg, rgba(255, 0, 128, 0.2), rgba(139, 92, 246, 0.2));
            color: var(--primary-neon);
        }

        .nav-icon {
            font-size: 20px;
            width: 30px;
            text-align: center;
        }

        .nav-text {
            font-size: 14px;
            font-weight: 500;
            display: none;
        }

        .sidebar.expanded .nav-text {
            display: block;
        }

        .chat-history {
            width: 100%;
            margin-top: 20px;
            display: none;
        }

        .sidebar.expanded .chat-history {
            display: block;
        }

        .history-title {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 10px;
            padding-left: 15px;
        }

        .history-item {
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 5px;
            cursor: pointer;
            font-size: 13px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            background: rgba(139, 92, 246, 0.1);
        }

        .history-date {
            font-size: 10px;
            color: var(--text-secondary);
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-darker);
        }

        /* ===== TOP BAR ===== */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: var(--bg-dark);
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
        }

        .model-selector {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .model-select {
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 14px;
            min-width: 200px;
            cursor: pointer;
            background-image: linear-gradient(45deg, transparent 50%, var(--primary-neon) 50%);
            background-position: calc(100% - 20px) center;
            background-repeat: no-repeat;
            background-size: 8px 8px;
            appearance: none;
            padding-right: 40px;
        }

        .model-select:focus {
            outline: none;
            border-color: var(--primary-neon);
            box-shadow: 0 0 0 3px rgba(255, 0, 128, 0.2);
        }

        .model-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ffaa;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .top-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 10px 20px;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .action-btn:hover {
            background: rgba(139, 92, 246, 0.2);
            transform: translateY(-2px);
        }

        /* ===== CHAT AREA ===== */
        .chat-area {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        /* Chat Container */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        /* Welcome Screen */
        .welcome-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-title {
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-neon), var(--secondary-neon));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 20px;
        }

        .welcome-subtitle {
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 600px;
            line-height: 1.6;
        }

        .quick-prompts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            width: 100%;
            max-width: 800px;
        }

        .prompt-btn {
            padding: 20px;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 15px;
            color: var(--text-primary);
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .prompt-btn:hover {
            background: rgba(139, 92, 246, 0.2);
            transform: translateY(-3px);
            border-color: var(--primary-neon);
        }

        .prompt-icon {
            font-size: 24px;
            color: var(--primary-neon);
        }

        .prompt-text h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .prompt-text p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Messages Container */
        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: none;
        }

        /* Chat Bubbles - LEBAR dan BESAR */
        .message {
            margin-bottom: 25px;
            animation: fadeIn 0.3s ease;
        }

        .message.user {
            margin-left: auto;
            max-width: 80%;
        }

        .message.ai {
            margin-right: auto;
            max-width: 80%;
        }

        .message-error {
            max-width: 80%;
            margin: 0 auto 25px;
            animation: shake 0.5s ease;
        }

        .message-bubble {
            padding: 20px;
            border-radius: 20px;
            position: relative;
            word-wrap: break-word;
            line-height: 1.6;
        }

        .user .message-bubble {
            background: var(--user-bubble);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .ai .message-bubble {
            background: var(--ai-bubble);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-bottom-left-radius: 5px;
        }

        .error .message-bubble {
            background: var(--error-bubble);
            color: white;
            text-align: center;
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 13px;
        }

        .message-sender {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .message-time {
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
        }

        .message-content {
            font-size: 15px;
        }

        .message-content pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .message-content code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        .message-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .message:hover .message-actions {
            opacity: 1;
        }

        .action-icon {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            padding: 5px;
            font-size: 14px;
            transition: color 0.3s ease;
        }

        .action-icon:hover {
            color: white;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: none;
            padding: 20px;
            background: var(--ai-bubble);
            border-radius: 20px;
            margin-bottom: 25px;
            max-width: 80%;
            border-bottom-left-radius: 5px;
            animation: pulseSoft 1.5s infinite;
        }

        @keyframes pulseSoft {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .typing-dots {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .typing-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary-neon);
            animation: typing 1.4s infinite;
        }

        .typing-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* ===== INPUT AREA ===== */
        .input-area {
            padding: 20px;
            background: var(--bg-dark);
            border-top: 1px solid rgba(139, 92, 246, 0.3);
        }

        .input-wrapper {
            display: flex;
            gap: 15px;
            align-items: flex-end;
            max-width: 1200px;
            margin: 0 auto;
        }

        .input-box {
            flex: 1;
            position: relative;
        }

        #messageInput {
            width: 100%;
            padding: 20px 70px 20px 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 15px;
            color: var(--text-primary);
            font-size: 16px;
            resize: none;
            min-height: 60px;
            max-height: 200px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        #messageInput:focus {
            outline: none;
            border-color: var(--primary-neon);
            box-shadow: 0 0 0 3px rgba(255, 0, 128, 0.2);
        }

        .input-buttons {
            position: absolute;
            right: 15px;
            bottom: 15px;
            display: flex;
            gap: 10px;
        }

        .input-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 18px;
            padding: 5px;
            transition: color 0.3s ease;
        }

        .input-btn:hover {
            color: var(--primary-neon);
        }

        .send-btn {
            background: linear-gradient(135deg, var(--primary-neon), var(--accent-neon));
            border: none;
            border-radius: 15px;
            color: white;
            cursor: pointer;
            padding: 0 35px;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            height: 60px;
        }

        .send-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 0, 128, 0.3);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* ===== CODE CANVAS ===== */
        .code-canvas {
            width: 600px;
            background: var(--bg-dark);
            border-left: 1px solid rgba(139, 92, 246, 0.3);
            display: none;
            flex-direction: column;
        }

        .code-canvas.active {
            display: flex;
        }

        .canvas-header {
            padding: 20px;
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .canvas-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .canvas-actions {
            display: flex;
            gap: 10px;
        }

        .canvas-btn {
            padding: 8px 15px;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .canvas-content {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        #codeEditor {
            width: 100%;
            height: 100%;
        }

        .preview-panel {
            padding: 20px;
            border-top: 1px solid rgba(139, 92, 246, 0.3);
            max-height: 300px;
            overflow-y: auto;
        }

        .preview-title {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        #codePreview {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            min-height: 100px;
        }

        /* ===== LOGIN PAGE ===== */
        .auth-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #050510 0%, #0a0a1a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .auth-container {
            width: 100%;
            max-width: 500px;
            background: var(--card-bg);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 20px;
            padding: 40px;
            backdrop-filter: blur(20px);
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .auth-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .auth-logo {
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-neon), var(--secondary-neon));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }

        .auth-subtitle {
            color: var(--text-secondary);
            letter-spacing: 3px;
            font-size: 14px;
        }

        .auth-form .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-input {
            width: 100%;
            padding: 16px 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-neon);
            box-shadow: 0 0 0 3px rgba(255, 0, 128, 0.2);
        }

        .auth-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary-neon), var(--accent-neon));
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin: 10px 0;
        }

        .auth-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 0, 128, 0.3);
        }

        .auth-divider {
            display: flex;
            align-items: center;
            margin: 25px 0;
            color: var(--text-secondary);
        }

        .auth-divider::before,
        .auth-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.3), transparent);
        }

        .auth-divider span {
            padding: 0 20px;
            font-size: 13px;
        }

        .auth-footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(139, 92, 246, 0.3);
            text-align: center;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .auth-link {
            color: var(--secondary-neon);
            cursor: pointer;
            text-decoration: none;
        }

        .auth-link:hover {
            text-decoration: underline;
        }

        /* ===== SETTINGS PAGE ===== */
        .settings-page {
            display: none;
            padding: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .settings-page.active {
            display: block;
        }

        .settings-section {
            background: var(--card-bg);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .settings-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary-neon);
        }

        .api-key-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .api-key-card {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 12px;
            padding: 20px;
        }

        .api-key-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .api-key-name {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .api-key-status {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 20px;
            background: rgba(0, 255, 170, 0.2);
            color: #00ffaa;
        }

        .api-key-status.expired {
            background: rgba(255, 71, 87, 0.2);
            color: #ff4757;
        }

        .api-key-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .api-key-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 1200px) {
            .code-canvas {
                width: 500px;
            }
        }

        @media (max-width: 992px) {
            .code-canvas {
                width: 400px;
            }
            
            .chat-area {
                flex-direction: column;
            }
            
            .code-canvas.active {
                height: 50vh;
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .sidebar.expanded {
                position: fixed;
                left: 0;
                top: 0;
                height: 100%;
                z-index: 1000;
                background: var(--bg-dark);
            }
            
            .overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 999;
                display: none;
            }
            
            .overlay.active {
                display: block;
            }
            
            .top-actions {
                display: none;
            }
            
            .quick-prompts {
                grid-template-columns: 1fr;
            }
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* ===== SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--primary-neon), var(--accent-neon));
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, var(--primary-neon), var(--secondary-neon));
        }
    </style>
</head>
<body>

    <!-- ===== LOADING SCREEN ===== -->
    <div id="loadingScreen">
        <div class="atom-loader">
            <div class="nucleus"></div>
            <div class="orbit">
                <div class="electron"></div>
            </div>
            <div class="orbit">
                <div class="electron"></div>
            </div>
        </div>
        <h1 class="loading-text">NEXUS AI</h1>
        <p class="loading-subtext">Initializing Quantum Intelligence...</p>
    </div>

    <!-- ===== AUTH PAGES ===== -->
    <div id="authPage" class="auth-page" style="display: none;">
        <div class="auth-container" id="loginContainer">
            <div class="auth-header">
                <h1 class="auth-logo">NEXUS AI</h1>
                <p class="auth-subtitle">QUANTUM INTELLIGENCE PLATFORM</p>
            </div>
            
            <div class="auth-form">
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-envelope"></i> Quantum ID
                    </label>
                    <input type="email" id="loginEmail" class="form-input" placeholder="user@nexus.ai">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-lock"></i> Encryption Key
                    </label>
                    <input type="password" id="loginPassword" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                
                <button class="auth-btn" id="loginBtn">
                    <i class="fas fa-brain"></i>
                    QUANTUM SYNCHRONIZATION
                </button>
                
                <div class="auth-divider">
                    <span>OR CONTINUE WITH</span>
                </div>
                
                <button class="auth-btn" id="googleLoginBtn" style="background: transparent; border: 2px solid rgba(139, 92, 246, 0.3);">
                    <i class="fab fa-google"></i>
                    GOOGLE ACCOUNT
                </button>
                
                <p class="text-center" style="margin-top: 20px; color: var(--text-secondary);">
                    No quantum signature?
                    <a class="auth-link" id="showRegister">CREATE NEXUS ID</a>
                </p>
            </div>
            
            <div class="auth-footer">
                <p>ENCRYPTION: QUANTUM-SAFE AES-256-GCM | NEXUS CORE v10.0</p>
            </div>
        </div>
        
        <!-- Register Container -->
        <div class="auth-container" id="registerContainer" style="display: none;">
            <button class="auth-btn" id="backToLogin" style="background: transparent; border: 2px solid rgba(139, 92, 246, 0.3); margin-bottom: 30px;">
                <i class="fas fa-arrow-left"></i>
                BACK TO LOGIN
            </button>
            
            <div class="auth-header">
                <h1 class="auth-logo">CREATE ID</h1>
                <p class="auth-subtitle">JOIN QUANTUM NETWORK</p>
            </div>
            
            <div class="auth-form">
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-user"></i> Quantum Alias
                    </label>
                    <input type="text" id="regName" class="form-input" placeholder="Enter your name">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-envelope"></i> Quantum ID
                    </label>
                    <input type="email" id="regEmail" class="form-input" placeholder="nexus@quantum.ai">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-lock"></i> Encryption Key
                    </label>
                    <input type="password" id="regPassword" class="form-input" placeholder="Create strong password">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-lock"></i> Confirm Key
                    </label>
                    <input type="password" id="regConfirm" class="form-input" placeholder="Re-enter password">
                </div>
                
                <button class="auth-btn" id="registerBtn">
                    <i class="fas fa-atom"></i>
                    INITIATE QUANTUM SYNTHESIS
                </button>
            </div>
            
            <div class="auth-footer">
                <p>By creating account, you agree to our Quantum Terms</p>
            </div>
        </div>
    </div>

    <!-- ===== MAIN APP ===== -->
    <div id="appContainer" class="app-container" style="display: none;">
        <!-- Overlay for mobile -->
        <div class="overlay" id="sidebarOverlay"></div>
        
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="logo-container">
                <div class="logo">NEXUS</div>
                <div class="logo-sub">QUANTUM AI</div>
            </div>
            
            <div class="user-section">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-info">
                    <h4 id="username">Loading...</h4>
                    <p id="useremail">user@nexus.ai</p>
                </div>
            </div>
            
            <nav class="nav-menu">
                <div class="nav-item active" data-page="chat">
                    <div class="nav-icon">
                        <i class="fas fa-comment"></i>
                    </div>
                    <div class="nav-text">Quantum Chat</div>
                </div>
                
                <div class="nav-item" data-page="canvas">
                    <div class="nav-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <div class="nav-text">Code Canvas</div>
                </div>
                
                <div class="nav-item" data-page="keys">
                    <div class="nav-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="nav-text">API Keys</div>
                </div>
                
                <div class="nav-item" data-page="settings">
                    <div class="nav-icon">
                        <i class="fas fa-cog"></i>
                    </div>
                    <div class="nav-text">Settings</div>
                </div>
            </nav>
            
            <!-- Chat History -->
            <div class="chat-history">
                <div class="history-title">CHAT HISTORY</div>
                <div id="historyList">
                    <!-- History items will be added here -->
                </div>
            </div>
            
            <button class="nav-item" id="logoutBtn" style="margin-top: auto;">
                <div class="nav-icon">
                    <i class="fas fa-sign-out-alt"></i>
                </div>
                <div class="nav-text">Logout</div>
            </button>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="model-selector">
                    <select id="aiModel" class="model-select">
                        <option value="auto">ü§ñ Auto Select (Smart)</option>
                        <option value="gemini">‚≠ê Google Gemini Pro</option>
                        <option value="openai">‚ö° OpenAI GPT-4</option>
                        <option value="claude">üß† Claude 3 Opus</option>
                        <option value="local">üíª Local LLM</option>
                    </select>
                    <div class="model-status">
                        <span class="status-dot"></span>
                        <span>Quantum Connected</span>
                    </div>
                </div>
                
                <div class="top-actions">
                    <button class="action-btn" id="newChatBtn">
                        <i class="fas fa-plus"></i> New Chat
                    </button>
                    <button class="action-btn" id="voiceToggle">
                        <i class="fas fa-microphone"></i> Voice
                    </button>
                    <button class="action-btn" id="themeToggle">
                        <i class="fas fa-moon"></i> Theme
                    </button>
                </div>
            </div>
            
            <!-- Chat Area -->
            <div class="chat-area">
                <!-- Chat Container -->
                <div class="chat-container">
                    <!-- Welcome Screen -->
                    <div class="welcome-screen" id="welcomeScreen">
                        <h1 class="welcome-title">Welcome to Nexus AI</h1>
                        <p class="welcome-subtitle">
                            Your quantum-powered assistant for coding, creativity, and problem-solving. 
                            Ask anything, create anything, explore everything.
                        </p>
                        
                        <div class="quick-prompts">
                            <div class="prompt-btn" data-prompt="Buatkan kode Python untuk web scraping dengan BeautifulSoup">
                                <div class="prompt-icon">
                                    <i class="fab fa-python"></i>
                                </div>
                                <div class="prompt-text">
                                    <h4>Python Web Scraping</h4>
                                    <p>Kode lengkap dengan error handling</p>
                                </div>
                            </div>
                            
                            <div class="prompt-btn" data-prompt="Jelaskan quantum computing dengan analogi sederhana">
                                <div class="prompt-icon">
                                    <i class="fas fa-atom"></i>
                                </div>
                                <div class="prompt-text">
                                    <h4>Quantum Computing</h4>
                                    <p>Penjelasan untuk pemula</p>
                                </div>
                            </div>
                            
                            <div class="prompt-btn" data-prompt="Bantu saya debug kode JavaScript ini">
                                <div class="prompt-icon">
                                    <i class="fab fa-js"></i>
                                </div>
                                <div class="prompt-text">
                                    <h4>Debug JavaScript</h4>
                                    <p>Cari bug dan perbaiki</p>
                                </div>
                            </div>
                            
                            <div class="prompt-btn" data-prompt="Buat puisi tentang teknologi masa depan">
                                <div class="prompt-icon">
                                    <i class="fas fa-pen-fancy"></i>
                                </div>
                                <div class="prompt-text">
                                    <h4>Creative Writing</h4>
                                    <p>Puisi, cerita, atau konten</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Messages Container -->
                    <div class="messages-container" id="messagesContainer">
                        <!-- Messages will be added here -->
                    </div>
                    
                    <!-- Typing Indicator -->
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        Nexus AI is thinking...
                    </div>
                </div>
                
                <!-- Code Canvas (Right Panel) -->
                <div class="code-canvas" id="codeCanvas">
                    <div class="canvas-header">
                        <div class="canvas-title">
                            <i class="fas fa-code"></i>
                            Code Canvas
                        </div>
                        <div class="canvas-actions">
                            <button class="canvas-btn" id="runCodeBtn">
                                <i class="fas fa-play"></i> Run
                            </button>
                            <button class="canvas-btn" id="copyCodeBtn">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="canvas-btn" id="clearCodeBtn">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                        </div>
                    </div>
                    
                    <div class="canvas-content">
                        <div id="codeEditor"></div>
                    </div>
                    
                    <div class="preview-panel">
                        <div class="preview-title">OUTPUT PREVIEW</div>
                        <div id="codePreview">
                            // Code output will appear here
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="input-area">
                <div class="input-wrapper">
                    <div class="input-box">
                        <textarea 
                            id="messageInput" 
                            placeholder="Ketik pesan ke Nexus AI... (Shift+Enter untuk baris baru, Enter untuk kirim)"
                            rows="1"
                        ></textarea>
                        <div class="input-buttons">
                            <button class="input-btn" id="attachFileBtn" title="Attach file">
                                <i class="fas fa-paperclip"></i>
                            </button>
                            <button class="input-btn" id="voiceInputBtn" title="Voice input">
                                <i class="fas fa-microphone"></i>
                            </button>
                            <button class="input-btn" id="emojiBtn" title="Emoji">
                                <i class="far fa-smile"></i>
                            </button>
                        </div>
                    </div>
                    
                    <button class="send-btn" id="sendMessageBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- ===== SETTINGS PAGES ===== -->
    <div class="settings-page" id="settingsPage">
        <div class="settings-section">
            <h2 class="settings-title">
                <i class="fas fa-key"></i>
                API KEY MANAGEMENT
            </h2>
            
            <div class="api-key-grid">
                <div class="api-key-card">
                    <div class="api-key-header">
                        <div class="api-key-name">
                            <i class="fab fa-google" style="color: #4285F4;"></i>
                            Google Gemini
                        </div>
                        <div class="api-key-status" id="geminiStatus">ACTIVE</div>
                    </div>
                    <input type="text" class="api-key-input" id="geminiKey" 
                           placeholder="AIzaSy..." value="AIzaSyBiH7xdMUR7aXK8S1AWvuo1qJu2mqabI4g">
                    <div class="api-key-actions">
                        <button class="canvas-btn" onclick="testAPI('gemini')">
                            <i class="fas fa-test"></i> Test
                        </button>
                        <button class="canvas-btn" onclick="saveAPIKey('gemini')">
                            <i class="fas fa-save"></i> Save
                        </button>
                    </div>
                </div>
                
                <div class="api-key-card">
                    <div class="api-key-header">
                        <div class="api-key-name">
                            <i class="fab fa-openai" style="color: #00A67E;"></i>
                            OpenAI GPT
                        </div>
                        <div class="api-key-status expired" id="openaiStatus">EXPIRED</div>
                    </div>
                    <input type="text" class="api-key-input" id="openaiKey" 
                           placeholder="sk-proj..." value="sk-proj-pLzNccYgL6bdFQZKatWx_#d660WICmGhaJGCVeN5bJeJ2fi5loc6rYXvOtjX7E1vF6M5IdpmQpuT3BlbkFJIpyp40GPHO5Kt4SM83CWlShPS9wxLgKsrzZcJi8141F3C0gEkXfMtLqtX_6xuZbgo-FVzl4EgA">
                    <div class="api-key-actions">
                        <button class="canvas-btn" onclick="testAPI('openai')">
                            <i class="fas fa-test"></i> Test
                        </button>
                        <button class="canvas-btn" onclick="saveAPIKey('openai')">
                            <i class="fas fa-save"></i> Save
                        </button>
                    </div>
                </div>

                <div class="api-key-card">
                    <div class="api-key-header">
                        <div class="api-key-name">
                            <i class="fas fa-robot" style="color: #FF6B35;"></i>
                            Claude AI
                        </div>
                        <div class="api-key-status" id="claudeStatus">ACTIVE</div>
                    </div>
                    <input type="text" class="api-key-input" id="claudeKey" 
                           placeholder="sk-ant-api03..." value="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">
                    <div class="api-key-actions">
                        <button class="canvas-btn" onclick="testAPI('claude')">
                            <i class="fas fa-test"></i> Test
                        </button>
                        <button class="canvas-btn" onclick="saveAPIKey('claude')">
                            <i class="fas fa-save"></i> Save
                        </button>
                    </div>
                </div>
            </div>
            
            <button class="auth-btn" onclick="getFreeAPIKeys()" style="margin-top: 20px;">
                <i class="fas fa-gift"></i>
                GET FREE API KEYS
            </button>
        </div>
        
        <div class="settings-section">
            <h2 class="settings-title">
                <i class="fas fa-sliders-h"></i>
                CHAT SETTINGS
            </h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                <div>
                    <label style="display: block; margin-bottom: 10px; color: var(--text-secondary);">
                        <input type="checkbox" id="enableEmojis" checked> 
                        Enable Emojis üòä
                    </label>
                    <label style="display: block; margin-bottom: 10px; color: var(--text-secondary);">
                        <input type="checkbox" id="enableVoice" checked> 
                        Voice Input üé§
                    </label>
                    <label style="display: block; margin-bottom: 10px; color: var(--text-secondary);">
                        <input type="checkbox" id="enableHistory" checked> 
                        Save Chat History üíæ
                    </label>
                </div>
                
                <div>
                    <label style="display: block; margin-bottom: 10px; color: var(--text-secondary);">
                        <input type="checkbox" id="filterProfanity" checked> 
                        Filter Bad Words üö´
                    </label>
                    <label style="display: block; margin-bottom: 10px; color: var(--text-secondary);">
                        <input type="checkbox" id="autoScroll" checked> 
                        Auto Scroll üìú
                    </label>
                    <label style="display: block; margin-bottom: 10px; color: var(--text-secondary);">
                        <input type="checkbox" id="typingIndicator" checked> 
                        Show Typing ‚úçÔ∏è
                    </label>
                </div>
            </div>
        </div>
        
        <div class="settings-section">
            <h2 class="settings-title">
                <i class="fas fa-paint-brush"></i>
                THEME CUSTOMIZATION
            </h2>
            
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                <button class="canvas-btn" onclick="setTheme('red')" style="background: linear-gradient(135deg, #ff0080, #8b5cf6);">
                    Neon Red/Blue
                </button>
                <button class="canvas-btn" onclick="setTheme('green')" style="background: linear-gradient(135deg, #00ffaa, #00b8ff);">
                    Neon Green/Blue
                </button>
                <button class="canvas-btn" onclick="setTheme('purple')" style="background: linear-gradient(135deg, #8b5cf6, #ec4899);">
                    Purple/Pink
                </button>
                <button class="canvas-btn" onclick="setTheme('orange')" style="background: linear-gradient(135deg, #f97316, #eab308);">
                    Orange/Yellow
                </button>
                <button class="canvas-btn" onclick="setTheme('dark')" style="background: linear-gradient(135deg, #1e293b, #0f172a);">
                    Dark Mode
                </button>
            </div>
        </div>
    </div>

    <script>
        const CONFIG = {
            FIREBASE: {
                apiKey: "AIzaSyBK-MehTTzURY5jT5stH363Y5_WE4iy-XA",
                authDomain: "volca-tools.firebaseapp.com",
                projectId: "volca-tools",
                storageBucket: "volca-tools.firebasestorage.app",
                messagingSenderId: "262525907487",
                appId: "1:262525907487:web:4abc37fa3b583223569b2a",
                measurementId: "G-Q6W58HE2B3"
            },
            
            API_KEYS: {
                gemini: "AIzaSyBiH7xdMUR7aXK8S1AWvuo1qJu2mqabI4g",
                openai: "sk-proj-pLzNccYgL6bdFQZKatWx_#d660WICmGhaJGCVeN5bJeJ2fi5loc6rYXvOtjX7E1vF6M5IdpmQpuT3BlbkFJIpyp40GPHO5Kt4SM83CWlShPS9wxLgKsrzZcJi8141F3C0gEkXfMtLqtX_6xuZbgo-FVzl4EgA",
                claude: "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"
            },
            
            STORAGE_KEYS: {
                CHAT_HISTORY: 'nexus_chat_history',
                USER_SETTINGS: 'nexus_user_settings',
                API_CONFIG: 'nexus_api_config'
            }
        };

        // ===== STATE VARIABLES =====
        let currentUser = null;
        let chatHistory = [];
        let currentChat = [];
        let isTyping = false;
        let codeEditor = null;
        let speechRecognition = null;

        // ===== DOM ELEMENTS =====
        const dom = {
            loading: document.getElementById('loadingScreen'),
            authPage: document.getElementById('authPage'),
            loginContainer: document.getElementById('loginContainer'),
            registerContainer: document.getElementById('registerContainer'),
            appContainer: document.getElementById('appContainer'),
            sidebar: document.getElementById('sidebar'),
            menuToggle: document.getElementById('menuToggle'),
            sidebarOverlay: document.getElementById('sidebarOverlay'),
            welcomeScreen: document.getElementById('welcomeScreen'),
            messagesContainer: document.getElementById('messagesContainer'),
            messageInput: document.getElementById('messageInput'),
            sendMessageBtn: document.getElementById('sendMessageBtn'),
            typingIndicator: document.getElementById('typingIndicator'),
            codeCanvas: document.getElementById('codeCanvas'),
            settingsPage: document.getElementById('settingsPage'),
            username: document.getElementById('username'),
            useremail: document.getElementById('useremail'),
            aiModel: document.getElementById('aiModel'),
            newChatBtn: document.getElementById('newChatBtn'),
            logoutBtn: document.getElementById('logoutBtn')
        };

        // ===== INISIALISASI =====
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('üöÄ NEXUS AI v10.0 Initializing...');
            
            // Sembunyikan loading setelah 2 detik
            setTimeout(() => {
                dom.loading.style.opacity = '0';
                setTimeout(() => {
                    dom.loading.style.display = 'none';
                    checkAuthState();
                }, 500);
            }, 2000);
            
            // Setup event listeners
            setupEventListeners();
            
            // Inisialisasi Monaco Editor
            await initCodeEditor();
            
            // Load chat history dari localStorage
            loadChatHistory();
        });

        // ===== AUTHENTICATION =====
        function checkAuthState() {
            // Cek apakah user sudah login (di localStorage)
            const savedUser = localStorage.getItem('nexus_user');
            
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showApp();
            } else {
                showAuth();
            }
        }

        function showAuth() {
            dom.authPage.style.display = 'flex';
            dom.appContainer.style.display = 'none';
        }

        function showApp() {
            dom.authPage.style.display = 'none';
            dom.appContainer.style.display = 'flex';
            
            // Update user info
            if (currentUser) {
                dom.username.textContent = currentUser.name || 'Quantum User';
                dom.useremail.textContent = currentUser.email || 'user@nexus.ai';
            }
            
            // Focus ke input
            setTimeout(() => {
               dom.messageInput.focus();
            }, 500);
        }

        // ===== EVENT LISTENERS =====
        function setupEventListeners() {
            // Auth
            document.getElementById('loginBtn')?.addEventListener('click', handleLogin);
            document.getElementById('registerBtn')?.addEventListener('click', handleRegister);
            document.getElementById('googleLoginBtn')?.addEventListener('click', handleGoogleLogin);
            document.getElementById('showRegister')?.addEventListener('click', showRegisterForm);
            document.getElementById('backToLogin')?.addEventListener('click', showLoginForm);
            
            // Sidebar
            dom.menuToggle?.addEventListener('click', toggleSidebar);
            dom.sidebarOverlay?.addEventListener('click', toggleSidebar);
            
            // Navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const page = this.getAttribute('data-page');
                    navigateTo(page);
                });
            });
            
            // Chat
            dom.newChatBtn?.addEventListener('click', startNewChat);
            dom.sendMessageBtn?.addEventListener('click', sendMessage);
            dom.messageInput?.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            dom.messageInput?.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });
            
            // Quick prompts
            document.querySelectorAll('.prompt-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const prompt = this.getAttribute('data-prompt');
                    dom.messageInput.value = prompt;
                    dom.messageInput.style.height = 'auto';
                    dom.messageInput.style.height = dom.messageInput.scrollHeight + 'px';
                    dom.messageInput.focus();
                });
            });
            
            // Logout
            dom.logoutBtn?.addEventListener('click', handleLogout);
            
            // Voice input
            document.getElementById('voiceInputBtn')?.addEventListener('click', toggleVoiceInput);
            
            // Code canvas
            document.getElementById('runCodeBtn')?.addEventListener('click', runCode);
            document.getElementById('copyCodeBtn')?.addEventListener('click', copyCode);
            document.getElementById('clearCodeBtn')?.addEventListener('click', clearCode);
        }

        // ===== AUTH HANDLERS =====
        function handleLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showNotification('Masukkan email dan password', 'error');
                return;
            }
            
            // Simulasi login (di production pakai Firebase)
            const loginBtn = document.getElementById('loginBtn');
            loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> AUTHENTICATING...';
            loginBtn.disabled = true;
            
            setTimeout(() => {
                currentUser = {
                    id: 'user_' + Date.now(),
                    name: email.split('@')[0],
                    email: email,
                    createdAt: new Date().toISOString()
                };
                
                // Simpan ke localStorage
                localStorage.setItem('nexus_user', JSON.stringify(currentUser));
                
                showNotification(' Login successful! Welcome to Nexus AI', 'success');
                showApp();
                
                loginBtn.innerHTML = '<i class="fas fa-brain"></i> QUANTUM SYNCHRONIZATION';
                loginBtn.disabled = false;
            }, 1500);
        }

        function handleRegister() {
            const name = document.getElementById('regName').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const password = document.getElementById('regPassword').value;
            const confirm = document.getElementById('regConfirm').value;
            
            if (!name || !email || !password || !confirm) {
                showNotification('Isi semua field', 'error');
                return;
            }
            
            if (password !== confirm) {
                showNotification('Password tidak cocok', 'error');
                return;
            }
            
            const registerBtn = document.getElementById('registerBtn');
            registerBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> CREATING...';
            registerBtn.disabled = true;
            
            setTimeout(() => {
                currentUser = {
                    id: 'user_' + Date.now(),
                    name: name,
                    email: email,
                    createdAt: new Date().toISOString()
                };
                
                localStorage.setItem('nexus_user', JSON.stringify(currentUser));
                
                showNotification('üéâ Account created! Welcome to the quantum network', 'success');
                showApp();
                
                registerBtn.innerHTML = '<i class="fas fa-atom"></i> INITIATE QUANTUM SYNTHESIS';
                registerBtn.disabled = false;
            }, 1500);
        }

        function handleGoogleLogin() {
            const btn = document.getElementById('googleLoginBtn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> CONNECTING...';
            btn.disabled = true;
            
            setTimeout(() => {
                currentUser = {
                    id: 'google_' + Date.now(),
                    name: 'Google User',
                    email: 'user@gmail.com',
                    provider: 'google',
                    createdAt: new Date().toISOString()
                };
                
                localStorage.setItem('nexus_user', JSON.stringify(currentUser));
                
                showNotification('üîó Google account connected!', 'success');
                showApp();
                
                btn.innerHTML = '<i class="fab fa-google"></i> GOOGLE ACCOUNT';
                btn.disabled = false;
            }, 1500);
        }

        function handleLogout() {
            if (confirm('End quantum connection?')) {
                currentUser = null;
                localStorage.removeItem('nexus_user');
                showAuth();
                showNotification('Quantum connection terminated', 'info');
            }
        }

        function showRegisterForm() {
            dom.loginContainer.style.display = 'none';
            dom.registerContainer.style.display = 'block';
        }

        function showLoginForm() {
            dom.registerContainer.style.display = 'none';
            dom.loginContainer.style.display = 'block';
        }

        // ===== SIDEBAR =====
        function toggleSidebar() {
            dom.sidebar.classList.toggle('expanded');
            dom.sidebarOverlay.classList.toggle('active');
        }

        // ===== NAVIGATION =====
        function navigateTo(page) {
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.nav-item').classList.add('active');
            
            // Hide all pages
            dom.welcomeScreen.style.display = 'none';
            dom.messagesContainer.style.display = 'none';
            dom.codeCanvas.classList.remove('active');
            dom.settingsPage.classList.remove('active');
            
            // Show selected page
            switch(page) {
                case 'chat':
                    if (currentChat.length === 0) {
                        dom.welcomeScreen.style.display = 'flex';
                    } else {
                        dom.messagesContainer.style.display = 'flex';
                    }
                    break;
                    
                case 'canvas':
                    dom.codeCanvas.classList.add('active');
                    break;
                    
                case 'keys':
                case 'settings':
                    dom.settingsPage.classList.add('active');
                    break;
            }
            
            // Close sidebar on mobile
            if (window.innerWidth <= 768) {
                toggleSidebar();
            }
        }

        // ===== CHAT SYSTEM =====
        function startNewChat() {
            if (currentChat.length > 0) {
                if (!confirm('Start new chat? Current chat will be saved.')) {
                    return;
                }
                saveCurrentChat();
            }
            
            currentChat = [];
            dom.messagesContainer.innerHTML = '';
            dom.welcomeScreen.style.display = 'flex';
            dom.messagesContainer.style.display = 'none';
            dom.messageInput.value = '';
            dom.messageInput.style.height = '60px';
            
            showNotification('üí´ New quantum chat started', 'info');
        }

        function sendMessage() {
            const message = dom.messageInput.value.trim();
            if (!message || isTyping) return;
            
            // Check for profanity
            if (containsProfanity(message)) {
                showNotification('‚ö†Ô∏è Please avoid inappropriate language', 'warning');
                addErrorMessage('Please avoid inappropriate language. Nexus AI maintains a respectful environment. üôè');
                dom.messageInput.value = '';
                return;
            }
            
            // Hide welcome screen
            dom.welcomeScreen.style.display = 'none';
            dom.messagesContainer.style.display = 'flex';
            
            // Add user message
            addMessage(message, 'user');
            
            // Clear input
            dom.messageInput.value = '';
            dom.messageInput.style.height = '60px';
            
            // Show typing indicator
            isTyping = true;
            dom.typingIndicator.style.display = 'flex';
            
            // Generate AI response
            setTimeout(() => {
                generateAIResponse(message);
            }, 500 + Math.random() * 1000);
        }

        function addMessage(text, sender) {
            const messageId = 'msg_' + Date.now();
            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.id = messageId;
            
            const isUser = sender === 'user';
            const senderName = isUser ? 'You' : 'Nexus AI';
            const senderIcon = isUser ? 'fa-user' : 'fa-robot';
            const bubbleColor = isUser ? 'var(--user-bubble)' : 'var(--ai-bubble)';
            
            // Format message dengan emoji jika AI
            let formattedText = formatMessage(text, !isUser);
            
            messageDiv.innerHTML = `
                <div class="message-bubble">
                    <div class="message-header">
                        <div class="message-sender">
                            <i class="fas ${senderIcon}"></i>
                            ${senderName}
                        </div>
                        <div class="message-time">${time}</div>
                    </div>
                    <div class="message-content">${formattedText}</div>
                    <div class="message-actions">
                        <button class="action-icon" onclick="copyMessage('${messageId}')" title="Copy">
                            <i class="fas fa-copy"></i>
                        </button>
                        ${!isUser ? `
                        <button class="action-icon" onclick="regenerateMessage('${messageId}')" title="Regenerate">
                            <i class="fas fa-redo"></i>
                        </button>
                        <button class="action-icon" onclick="showInCanvas('${messageId}')" title="Edit in Canvas">
                            <i class="fas fa-code"></i>
                        </button>
                        ` : ''}
                    </div>
                </div>
            `;
            
            dom.messagesContainer.appendChild(messageDiv);
            dom.messagesContainer.scrollTop = dom.messagesContainer.scrollHeight;
            
            // Save to current chat
            currentChat.push({
                id: messageId,
                text: text,
                sender: sender,
                time: time,
                timestamp: Date.now()
            });
        }

        function addErrorMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message error';
            
            messageDiv.innerHTML = `
                <div class="message-bubble">
                    <div class="message-header">
                        <div class="message-sender">
                            <i class="fas fa-exclamation-triangle"></i>
                            System Notice
                        </div>
                    </div>
                    <div class="message-content">${text}</div>
                </div>
            `;
            
            dom.messagesContainer.appendChild(messageDiv);
            dom.messagesContainer.scrollTop = dom.messagesContainer.scrollHeight;
        }

        function formatMessage(text, addEmojis = true) {
            let formatted = text
                .replace(/\n/g, '<br>')
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/`([^`]+)`/g, '<code>$1</code>')
                .replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');
            
            // Tambah emoji random jika di enable
            if (addEmojis && document.getElementById('enableEmojis')?.checked) {
                const emojis = ['üòä', 'ü§ñ', 'üöÄ', 'üí°', '‚ú®', 'üéØ', 'üî•', 'üíé', '‚ö°', 'üåü'];
                const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
                
                // Tambah emoji di akhir pesan (kadang-kadang)
                if (Math.random() > 0.5 && !text.includes('```')) {
                    formatted += ` ${randomEmoji}`;
                }
            }
            
            return formatted;
        }

        function containsProfanity(text) {
            if (!document.getElementById('filterProfanity')?.checked) return false;
            
            const badWords = [
                'anjing', 'bangsat', 'kontol', 'memek', 'goblok', 'bajingan',
                'fuck', 'shit', 'asshole', 'bitch', 'dick', 'pussy'
            ];
            
            const lowerText = text.toLowerCase();
            return badWords.some(word => lowerText.includes(word));
        }

        function generateAIResponse(userMessage) {
            const model = dom.aiModel.value;
            
            // Sample responses untuk demo
            const responses = {
                auto: `Halo! üëã Nexus AI di sini!

Anda bertanya: **"${userMessage}"**

Sebagai asisten quantum AI Anda, saya bisa bantu dengan:
‚ú® **Pemrograman** - Semua bahasa, semua framework
üß† **Problem Solving** - Logika, algoritma, debugging
üé® **Kreativitas** - Konten, ide, penulisan
üìö **Pembelajaran** - Penjelasan, tutorial, konsep

Mau fokus ke area mana? Saya siap membantu! üòä`,

                gemini: `ü§ñ **Gemini Pro Response**

*Pertanyaan:* "${userMessage}"

Saya Gemini dari Google AI! Saya bisa bantu Anda dengan:
‚Ä¢ Kode Python/JavaScript/Java dll
‚Ä¢ Analisis data dan visualisasi
‚Ä¢ Penjelasan konsep teknis
‚Ä¢ Penulisan kreatif dan konten

Ada yang spesifik yang Anda butuhkan? Saya akan berikan solusi terbaik!`,

                openai: `‚ö° **GPT-4 Response**

Query: "${userMessage}"

Hello! I'm GPT-4 from OpenAI. I can assist with:
‚Ä¢ Advanced code generation and debugging
‚Ä¢ Complex problem solving
‚Ä¢ Research and analysis
‚Ä¢ Creative writing and storytelling

How can I help you today? Let's create something amazing together!`,

                claude: `üß† **Claude 3 Opus Response**

Regarding: "${userMessage}"

Greetings! I'm Claude from Anthropic, focused on being helpful, harmless, and honest.

I excel at:
‚Ä¢ Detailed explanations and reasoning
‚Ä¢ Code review and optimization
‚Ä¢ Content analysis and summarization
‚Ä¢ Ethical problem solving

What would you like to explore? I'm here to assist thoughtfully.`
            };

        const response = responses[model] || responses.auto;
            
            // Add AI message
            addMessage(response, 'ai');
            
            // Hide typing indicator
            isTyping = false;
            dom.typingIndicator.style.display = 'none';
        }

        // ===== VOICE INPUT =====
        function toggleVoiceInput() {
            if (!('webkitSpeechRecognition' in window)) {
                showNotification('Browser tidak support voice input', 'error');
                return;
            }
            
            if (!speechRecognition) {
                speechRecognition = new webkitSpeechRecognition();
                speechRecognition.continuous = false;
                speechRecognition.interimResults = false;
                speechRecognition.lang = 'id-ID';
                
                speechRecognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    dom.messageInput.value = transcript;
                    speechRecognition.stop();
                };
                
                speechRecognition.onerror = function(event) {
                    showNotification('Error: ' + event.error, 'error');
                };
            }
            
            if (speechRecognition.start) {
                speechRecognition.start();
                showNotification('üé§ Listening... Speak now', 'info');
            }
        }

        // ===== CODE EDITOR =====
        async function initCodeEditor() {
            if (typeof monaco === 'undefined') return;
            
            require.config({ paths: { vs: 'https://unpkg.com/monaco-editor@0.36.0/min/vs' }});
            
            await new Promise(resolve => {
                require(['vs/editor/editor.main'], () => {
                    codeEditor = monaco.editor.create(document.getElementById('codeEditor'), {
                        value: `// Welcome to Nexus Code Canvas!\n// Write your code here and click Run\n\nfunction helloNexus() {\n    console.log("Hello from Nexus AI! üöÄ");\n    return "Quantum Code Ready!";\n}\n\nhelloNexus();`,
                        language: 'javascript',
                        theme: 'vs-dark',
                        fontSize: 14,
                        minimap: { enabled: true },
                        automaticLayout: true,
                        scrollBeyondLastLine: false
                    });
                    resolve();
                });
            });
        }

        function runCode() {
            if (!codeEditor) return;
            
            const code = codeEditor.getValue();
            const preview = document.getElementById('codePreview');
            
            try {
                // Untuk demo, kita simulate execution
                preview.innerHTML = `// Executing code...\n\n`;
                preview.innerHTML += `> ${code}\n\n`;
                preview.innerHTML += `// Output:\n‚úÖ Code executed successfully!\nüîß No errors found\nüöÄ Ready for production`;
                
                preview.style.color = '#00ffaa';
            } catch (error) {
                preview.innerHTML = `// Error:\n‚ùå ${error.message}\n\n// Stack trace:\n${error.stack}`;
                preview.style.color = '#ff4757';
            }
        }

        function copyCode() {
            if (!codeEditor) return;
            
            navigator.clipboard.writeText(codeEditor.getValue())
                .then(() => showNotification('üìã Code copied to clipboard', 'success'));
        }

        function clearCode() {
            if (!codeEditor) return;
            
            if (confirm('Clear code editor?')) {
                codeEditor.setValue('// Code cleared!\n// Start writing your quantum code here... üöÄ');
                document.getElementById('codePreview').innerHTML = '// Output will appear here';
            }
        }

        function showInCanvas(messageId) {
            const messageDiv = document.getElementById(messageId);
            if (!messageDiv) return;
            
            const messageText = messageDiv.querySelector('.message-content').textContent;
            
            // Navigate to canvas
            navigateTo('canvas');
            
            // Set code in editor
            if (codeEditor) {
                codeEditor.setValue(`// Code from chat:\n${messageText}`);
            }
        }

        // ===== UTILITY FUNCTIONS =====
        function copyMessage(messageId) {
            const messageDiv = document.getElementById(messageId);
            if (!messageDiv) return;
            
            const messageText = messageDiv.querySelector('.message-content').textContent;
            
            navigator.clipboard.writeText(messageText)
                .then(() => showNotification('üìã Message copied', 'success'));
        }

        function regenerateMessage(messageId) {
            // Find and regenerate
            const aiMessages = currentChat.filter(m => m.sender === 'ai');
            if (aiMessages.length > 0) {
                const lastAi = aiMessages[aiMessages.length - 1];
                const lastUser = currentChat[currentChat.length - 2];
                
                if (lastUser && lastUser.sender === 'user') {
                    // Remove messages
                    document.getElementById(lastAi.id)?.remove();
                    document.getElementById(lastUser.id)?.remove();
                    
                    currentChat = currentChat.filter(m => 
                        m.id !== lastAi.id && m.id !== lastUser.id
                    );
                    
                    // Regenerate
                    addMessage(lastUser.text, 'user');
                    
                    isTyping = true;
                    dom.typingIndicator.style.display = 'flex';
                    
                    setTimeout(() => {
                        generateAIResponse(lastUser.text);
                    }, 500);
                }
            }
        }

        function saveCurrentChat() {
            if (currentChat.length === 0) return;
            
            const chatData = {
                id: 'chat_' + Date.now(),
                title: currentChat[0]?.text?.substring(0, 50) || 'New Chat',
                messages: currentChat,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            // Simpan ke localStorage
            const savedChats = JSON.parse(localStorage.getItem('nexus_chats') || '[]');
            savedChats.unshift(chatData);
            localStorage.setItem('nexus_chats', JSON.stringify(savedChats.slice(0, 50))); // Simpan 50 chat terakhir
            
            showNotification('üíæ Chat saved to history', 'success');
        }

        function loadChatHistory() {
            const savedChats = JSON.parse(localStorage.getItem('nexus_chats') || '[]');
            const historyList = document.getElementById('historyList');
            
            if (savedChats.length === 0) {
                historyList.innerHTML = '<div class="history-item">No chat history yet</div>';
                return;
            }
            
            historyList.innerHTML = savedChats.map(chat => `
                <div class="history-item" data-chat-id="${chat.id}">
                    <span>${chat.title}</span>
                    <span class="history-date">${new Date(chat.createdAt).toLocaleDateString()}</span>
                </div>
            `).join('');
            
            // Add click listeners
            document.querySelectorAll('.history-item[data-chat-id]').forEach(item => {
                item.addEventListener('click', function() {
                    const chatId = this.getAttribute('data-chat-id');
                    loadChat(chatId);
                });
            });
        }

        function loadChat(chatId) {
            const savedChats = JSON.parse(localStorage.getItem('nexus_chats') || '[]');
            const chat = savedChats.find(c => c.id === chatId);
            
            if (!chat) {
                showNotification('Chat not found', 'error');
                return;
            }
            
            // Clear current chat
            currentChat = [];
            dom.messagesContainer.innerHTML = '';
            
            // Load messages
            chat.messages.forEach(msg => {
                addMessage(msg.text, msg.sender);
            });
            
            // Show messages
            dom.welcomeScreen.style.display = 'none';
            dom.messagesContainer.style.display = 'flex';
            navigateTo('chat');
            
            showNotification(`üìÅ Loaded chat: ${chat.title}`, 'success');
        }

        function showNotification(message, type = 'info') {
            const colors = {
                success: '#00ffaa',
                error: '#ff4757',
                warning: '#ffa502',
                info: '#2ed573'
            };
            
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                background: ${colors[type] || colors.info};
                color: white;
                border-radius: 10px;
                z-index: 10000;
                animation: slideIn 0.3s ease;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                font-weight: 500;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
            
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        function getFreeAPIKeys() {
            showNotification('üîë Getting free API keys...', 'info');
            
            setTimeout(() => {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0; left: 0;
                    width: 100%; height: 100%;
                    background: rgba(0,0,0,0.8);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10001;
                `;
                
                modal.innerHTML = `
                    <div style="
                        background: var(--card-bg);
                        padding: 30px;
                        border-radius: 15px;
                        max-width: 600px;
                        width: 90%;
                        max-height: 80vh;
                        overflow-y: auto;
                    ">
                        <h2 style="margin-bottom: 20px; color: var(--primary-neon);">
                            <i class="fas fa-gift"></i> Free API Keys
                        </h2>
                        
                        <div style="margin-bottom: 25px;">
                            <h4>üåê Where to get FREE API Keys:</h4>
                            <ul style="margin: 10px 0 20px 20px; color: var(--text-secondary);">
                                <li><a href="https://makersuite.google.com/app/apikey" target="_blank" style="color: var(--secondary-neon);">Google AI Studio</a> - Gemini API (Free tier available)</li>
                                <li><a href="https://platform.openai.com/api-keys" target="_blank" style="color: var(--secondary-neon);">OpenAI Platform</a> - $5 free credit for new users</li>
                                <li><a href="https://console.anthropic.com/" target="_blank" style="color: var(--secondary-neon);">Anthropic Console</a> - Claude API with free trial</li>
                                <li><a href="https://huggingface.co/inference-api" target="_blank" style="color: var(--secondary-neon);">Hugging Face</a> - Free inference API</li>
                                <li><a href="https://ollama.ai/" target="_blank" style="color: var(--secondary-neon);">Ollama</a> - Run local models for FREE</li>
                            </ul>
                        </div>
                        
                        <div style="margin-bottom: 25px;">
                            <h4>üí° Tips:</h4>
                            <p style="color: var(--text-secondary); font-size: 14px;">
                                1. Use different emails for multiple accounts<br>
                                2. Check for student discounts<br>
                                3. Local models (Ollama) are 100% free forever<br>
                                4. Some providers give free credits for startups
                            </p>
                        </div>
                        
                        <button onclick="this.parentElement.parentElement.remove()" style="
                            width: 100%;
                            padding: 15px;
                            background: linear-gradient(135deg, var(--primary-neon), var(--accent-neon));
                            border: none;
                            border-radius: 10px;
                            color: white;
                            font-weight: 600;
                            cursor: pointer;
                            margin-top: 20px;
                        ">
                            <i class="fas fa-check"></i> Got it!
                        </button>
                    </div>
                `;
                
                document.body.appendChild(modal);
            }, 1000);
        }

        function testAPI(provider) {
            showNotification(`Testing ${provider} API...`, 'info');
            
            setTimeout(() => {
                const statusElement = document.getElementById(provider + 'Status');
                if (statusElement) {
                    statusElement.textContent = 'ACTIVE';
                    statusElement.className = 'api-key-status';
                    showNotification(`‚úÖ ${provider} API connected successfully!`, 'success');
                }
            }, 1500);
        }

        function saveAPIKey(provider) {
            const input = document.getElementById(provider + 'Key');
            if (!input) return;
            
            const key = input.value.trim();
            if (!key) {
                showNotification('Please enter API key', 'error');
                return;
            }
            
            CONFIG.API_KEYS[provider] = key;
            localStorage.setItem('nexus_api_keys', JSON.stringify(CONFIG.API_KEYS));
            
            showNotification(`üîë ${provider} API key saved!`, 'success');
        }

        function setTheme(theme) {
            const root = document.documentElement;
            
            const themes = {
                red: {
                    '--primary-neon': '#ff0080',
                    '--secondary-neon': '#00ffea',
                    '--accent-neon': '#8b5cf6'
                },
                green: {
                    '--primary-neon': '#00ffaa',
                    '--secondary-neon': '#00b8ff',
                    '--accent-neon': '#00ffaa'
                },
                purple: {
                    '--primary-neon': '#8b5cf6',
                    '--secondary-neon': '#ec4899',
                    '--accent-neon': '#8b5cf6'
                },
                orange: {
                    '--primary-neon': '#f97316',
                    '--secondary-neon': '#eab308',
                    '--accent-neon': '#f97316'
                },
                dark: {
                    '--primary-neon': '#1e293b',
                    '--secondary-neon': '#0f172a',
                    '--accent-neon': '#1e293b'
                }
            };
            
            const colors = themes[theme] || themes.red;
            Object.entries(colors).forEach(([key, value]) => {
                root.style.setProperty(key, value);
            });
            
            showNotification(`üé® Theme changed to ${theme}`, 'success');
        }

        window.copyMessage = copyMessage;
        window.regenerateMessage = regenerateMessage;
        window.showInCanvas = showInCanvas;
        window.getFreeAPIKeys = getFreeAPIKeys;
        window.testAPI = testAPI;
        window.saveAPIKey = saveAPIKey;
        window.setTheme = setTheme;
        window.runCode = runCode;
        window.copyCode = copyCode;
        window.clearCode = clearCode;

        console.log('‚úÖ NEXUS AI v10.0 Ready!');
        console.log('üöÄ Powered by VOLCA');
        console.log('üíé All features loaded successfully');
    </script>
</body>
</html>
